(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{368:function(s,a,e){"use strict";e.r(a);var t=e(43),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("本章将带你对 Plus 进行安装，"),e("strong",[s._v("安装模式为基础安装")]),s._v("，安装系统："),e("strong",[s._v("CentOS")]),s._v(" "),e("code",[s._v("7.4")]),s._v("。")]),s._v(" "),e("h2",{attrs:{id:"下载-plus-程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载-plus-程序"}},[s._v("#")]),s._v(" 下载 Plus 程序")]),s._v(" "),e("p",[s._v("现在我们进入服务器，然后输入 "),e("code",[s._v("cd ~")]),s._v(" 进入家目录，我们在下载程序前，需要下载代码推荐的工具："),e("code",[s._v("Git")]),s._v("：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行完成后我们将代码放到合适的位置，我们推荐放在 "),e("code",[s._v("/usr/local/src")]),s._v(" 下面，所以输入 "),e("code",[s._v("cd /usr/local/src")]),s._v(" 进入该目录，然后执行下面的命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git clone `官方授权的仓库地址` plus && cd plus\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("好了，我们程序下载完成了，如果你原封不动复制的上面的命令，你随处目录为 "),e("code",[s._v("/usr/local/src/plus")]),s._v(" 了。")]),s._v(" "),e("p",[s._v("我们切换到最新的稳定版本吧，目前最新的稳定版本是 "),e("code",[s._v("2.0")]),s._v(" 所以执行下面的命令：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout tsauth/thinksns3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"创建数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库"}},[s._v("#")]),s._v(" 创建数据库")]),s._v(" "),e("p",[s._v("在前面章节中，我们安装好了 MySQL 5.7 现在我们使用 root 帐号进入数据库：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mysql -u root -h localhost -P "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3360")]),s._v(" -p\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("接下来，我们创建数据库：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("database")]),s._v(" plus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("上面 SQL 中的 "),e("code",[s._v("plus")]),s._v(" 可以替换为你希望的名字，为了避免安全问题，我们为 plus 数数据库分配一个独有的帐号密码，虽然此时我们可以使用 root 帐号，测试没有关系，但是推荐进行帐号分配，我们现在创建与"),e("strong",[s._v("数据库同名")]),s._v("的帐号吧：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" plus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("创建完成用户后，我们为用户设置密码，这里为了方便我将密码设置为 "),e("code",[s._v("12345678")]),s._v(" 你设置的时候可别这么干哟：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" password "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" plus"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("设置完成后，我们刷新一下数据库用户权限：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("flush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("接下来，我们把 "),e("code",[s._v("plus")]),s._v(" 数据库的所有权赋予给 "),e("code",[s._v("plus")]),s._v(" 用户：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" plus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" plus"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v('@"localhost"')]),s._v(" identified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("我们再次刷新一下数据库用户权限：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("flush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后我们输入 "),e("code",[s._v("exit;")]),s._v(" 退出 root 帐号，测试帐号密码是否成功,推出后执行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mysql -u plus -h localhost -P "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3360")]),s._v(" -p\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后输入密码进入，输入 "),e("code",[s._v("use plus;")]),s._v(" 能进入数据库基本上算成功了！好了，现在退出数据库吧！")]),s._v(" "),e("h2",{attrs:{id:"基础配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基础配置"}},[s._v("#")]),s._v(" 基础配置")]),s._v(" "),e("p",[s._v("我们输入 "),e("code",[s._v("cd /usr/local/src/plus")]),s._v(" 进入程序目录，然后执行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -rf ./storage/configure/.env.example ./storage/configure/.env "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -rf ./storage/configure/plus.yml.example ./storage/configure/plus.yml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("执行完成后会在 "),e("code",[s._v("storage/configure/")]),s._v(" 目录下多出 "),e("code",[s._v(".env")]),s._v(" 和 "),e("code",[s._v("plus.yml")]),s._v(" 文件。")]),s._v(" "),e("h2",{attrs:{id:"安装依赖包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖包"}},[s._v("#")]),s._v(" 安装依赖包")]),s._v(" "),e("p",[s._v("我们在安装依赖包之前，需要先下载 "),e("code",[s._v("composer")]),s._v(" 软件，这是 PHP 软件项目所使用的依赖管理工具，我们现在执行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://getcomposer.org/composer.phar "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/bin/composer "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/composer "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\ncomposer self-update\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("上面的命令根据网速决定快慢，因为文件在国外服务器所以有可能下载失败或者不完整，如果出现了错误就多试几次。")]),s._v(" "),e("p",[s._v("接下来，我们开始下载程序依赖吧，这个命令过程也会非常缓慢，如果下载过程中杨浦失败，请多试几次：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("composer update -vvv\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("如果出现内存溢出的情况请执行下面的命令")])]),s._v(" "),e("div",{staticClass:"language-shell script line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("php -d "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("memory_limit")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" composer"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"生成应用秘钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成应用秘钥"}},[s._v("#")]),s._v(" 生成应用秘钥")]),s._v(" "),e("p",[s._v("上面的步骤依旧安装完成了软件依赖，我们执行下面的命令来为应用生成独一无二的秘钥：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("php artisan app:key-generate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"配置数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置数据库"}},[s._v("#")]),s._v(" 配置数据库")]),s._v(" "),e("p",[s._v("我们打开 "),e("code",[s._v("storage/configure/plus.yml")]),s._v(" 文件，找到 "),e("code",[s._v("database")]),s._v(" 关键词，然后配置 "),e("code",[s._v("database")]),s._v(" 下面的子项（如果你不了解这个文件的格式，请先通过搜索引擎搜索 "),e("code",[s._v("YAML 语法")]),s._v(" 进行学习后开始配置）：")]),s._v(" "),e("ol",[e("li",[s._v("我们将 database.default 字段配置为 "),e("code",[s._v("mysql")])]),s._v(" "),e("li",[s._v("我们配置 database.connections.mysql 下的内容：")])]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("host")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 127.0.0.1  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库链接地址，我们配置为 127.0.0.1 或者 localhost 即可")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接端口，配置为 3306")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("database")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" plus   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用的数据库名称，按照我们创建的配置为 plus")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("username")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" plus   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接数据库使用的帐号，按照我们创建的配置为 plus")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345678")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库连接帐号密码")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("charset")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" utf8mb4 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用的字符集，配置为 utf8mb4")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("collation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" utf8mb4_unicode_ci "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照这里的配置为 utf8mb4_unicode_ci 即可")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"迁移数据表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#迁移数据表"}},[s._v("#")]),s._v(" 迁移数据表")]),s._v(" "),e("p",[s._v("我们在 Plus 程序中已经为你制作好了数据库表迁移文件，你只需要执行下面的命令即可：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("php artisan migrate -vvv\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"数据库填充"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库填充"}},[s._v("#")]),s._v(" 数据库填充")]),s._v(" "),e("p",[s._v("我们执行完成数据表迁移后，数据库已经存在数据表了，但是我们需要的一些默认数据并不存在，所以执行下面的命令进行数据填充：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("php artisan db:seed -vvv\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"静态资产发布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态资产发布"}},[s._v("#")]),s._v(" 静态资产发布")]),s._v(" "),e("p",[s._v("走到这一步，基本上就算安装完成了，但是对于后端等还有一些静态资产需要发布：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("php artisan vendor:publish --all -vvv\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看安装"}},[s._v("#")]),s._v(" 查看安装")]),s._v(" "),e("p",[s._v("好了，我们已经安装完成了，安装完成后，默认创始人帐号密码均为 "),e("code",[s._v("root")]),s._v("，为了方便我们查看，运行下面的命令进行查看站点：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("php artisan serve --host"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0 --port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("如果你不想用 80 或者 80 端口已经被占用，请更换其他")])]),s._v(" "),e("p",[s._v("执行后，命令行会进入 watch 状态，我们打开服务器的 IP 进行查看站点。")]),s._v(" "),e("p",[s._v("查看完成后按键盘上的 "),e("code",[s._v("ctrl")]),s._v(" + "),e("code",[s._v("C")]),s._v(" 退出。")])])}),[],!1,null,null,null);a.default=r.exports}}]);