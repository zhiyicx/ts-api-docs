(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{496:function(s,a,e){"use strict";e.r(a);var n=e(43),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("PHP从7.4升级到8.1+，涉及到很多新功能与优化项，包括命名参数、联合类型、注解、构造器属性提升、match 表达式、nullsafe 运算符、JIT，并改进了类型系统、错误处理、语法一致性。以及性能改进。")]),s._v(" "),e("p",[s._v("Laravel从8升级到10，涉及到HTTP客户端改进，还有新的Eloquent关联关系类型以及其他各种错误修复和可用性改进。")]),s._v(" "),e("h2",{attrs:{id:"一、环境安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、环境安装"}},[s._v("#")]),s._v(" 一、环境安装")]),s._v(" "),e("p",[s._v("1、更新php 至 8.1或8.2或8.3")]),s._v(" "),e("p",[s._v("在宝塔面板上面的软件商店安装即可")]),s._v(" "),e("p",[s._v("2、PHP安装以下扩展")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("fileinfo\nopcache\nredis\nexif\nmbstring\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("img",{attrs:{src:s.$withBase("/assets/img/v3/guide/installation/1725588348796.png")}}),s._v(" "),e("p",[s._v("3、PHP删除以下禁用函数")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("putenv\nsymlink \nproc_open\nshell_exec \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("img",{attrs:{src:s.$withBase("/assets/img/v3/guide/installation/1725588186222.png")}}),s._v(" "),e("p",[s._v("4、设置PHP命令行版本为新安装的php\n"),e("img",{attrs:{src:s.$withBase("/assets/img/v3/guide/installation/1725588495769.png")}})]),s._v(" "),e("p",[s._v("5、要求 Composer 2.2.0 或更高版本，升级Composer")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("composer self-update\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6、网站里面的PHP需要选择最新安装的版本\n"),e("img",{attrs:{src:s.$withBase("/assets/img/v3/guide/installation/1725589377798.png")}})]),s._v(" "),e("h2",{attrs:{id:"二、代码更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、代码更新"}},[s._v("#")]),s._v(" 二、代码更新")]),s._v(" "),e("p",[s._v("1、 拉取最新代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git pull ...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2、删除旧的composer依赖安并重新安装")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("rm -rf vendor\nrm -rf composer.lock\ncomposer install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("3、清理程序缓存")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("php artisan optimize:clear\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4、支付需要重新配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("微信需要申请API3密钥后，在后台重新配置\n\n支付宝需要重新生成证书密钥配置支付宝后，在后台重新配置\n\n微信或支付宝具体操作参考对应开放平台文档\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"三、可能遇见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、可能遇见问题"}},[s._v("#")]),s._v(" 三、可能遇见问题")]),s._v(" "),e("h3",{attrs:{id:"（一）宝塔安装php8报错-configure-error-iconv-does-not-support-errno"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#（一）宝塔安装php8报错-configure-error-iconv-does-not-support-errno"}},[s._v("#")]),s._v(" （一）宝塔安装PHP8报错 configure: error: iconv does not support errno")]),s._v(" "),e("p",[s._v("1、 安装最新的iconv")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("wget https://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.17.tar.gz\ntar -xzvf libiconv-1.17.tar.gz\ncd libiconv-1.17\n./configure --prefix=/usr/local/libiconv\nmake && make install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("2、新建文件 /etc/ld.so.conf.d/libiconv.conf")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /etc/ld.so.conf.d/libiconv.conf\n\n写入：/usr/local/libiconv/lib\n保存\n\nldconfig\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("3、更新配置文件 vim ~/.zshrc 加入以下 后输入命令：source ~/.zshrc")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('export CFLAGS="-I/usr/local/libiconv/include"\nexport LDFLAGS="-L/usr/local/libiconv/lib"\nexport LIBS="-liconv"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("4、运行以下命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ln -s /usr/local/libiconv/include/iconv.h /usr/include/iconv.h\nln -s /usr/local/libiconv/lib/libiconv.so /usr/lib/libiconv.so\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("5、把 php.sh 放入 /www/server/panel/install/php.sh 执行\n"),e("a",{attrs:{href:"/assets/img/v3/guide/installation/php.sh"}},[s._v("php.sh")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("chattr +i /www/server/panel/install/php.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6、重新在宝塔面上面安装 php8.3 就可以安装成功了")])])}),[],!1,null,null,null);a.default=t.exports}}]);