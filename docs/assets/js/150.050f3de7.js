(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{496:function(s,a,e){"use strict";e.r(a);var t=e(43),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"mac本地安装ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mac本地安装ts"}},[s._v("#")]),s._v(" "),e("strong",[s._v("Mac本地安装TS")])]),s._v(" "),e("p",[s._v("本文用于ThinkSNS3在Mac电脑本地部署参考。")]),s._v(" "),e("h2",{attrs:{id:"一、环境安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、环境安装"}},[s._v("#")]),s._v(" 一、环境安装")]),s._v(" "),e("p",[s._v("1、更新brew 至 4.2.4")]),s._v(" "),e("p",[s._v("brew update 待执行完毕后，使用"),e("strong",[s._v("brew -v")]),s._v("查看版本")]),s._v(" "),e("p",[s._v("2、安装icu4c 版本73.x")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("brew install  icu4c\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3、安装PHP 7.4")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("brew tap shivammathur/php\n\nbrew install shivammathur/php/php@7.4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("执行完毕后，"),e("strong",[s._v("Php -v")]),s._v("查看版本\n如果输出PHP 7.4.33即可，如果报错则可能是icu4c版本不对，或者其他问题根据提示进行排查处理")]),s._v(" "),e("p",[s._v("4、安装PhpWebStudy")]),s._v(" "),e("p",[s._v("通过"),e("a",{ref:"noopener noreferrer",attrs:{href:"https://www.macphpstudy.com/help-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),e("OutboundLink")],1),s._v("下载对应芯片版本的PhpWebStudy")]),s._v(" "),e("p",[s._v("3、通过PhpWebStudy安装Nginx、MySql、Redis")]),s._v(" "),e("p",[s._v("setup-brew源切-换切换到清华大学下载源（点击“切换”按钮等待顶部弹窗提示成功）")]),s._v(" "),e("p",[s._v("如果下载很慢或者提示下载失败尝试切换其他下载源")]),s._v(" "),e("p",[s._v("安装nginx，选中nginx-版本管理-等待刷新出列表，点击安装（1.25即可）-等待安装完毕右上角出现“确认”按钮，其他相同操作即可")]),s._v(" "),e("p",[s._v("nginx需要配置最大文件限制，否则上传视频会报错。选中nginx-配置文件，然后在"),e("strong",[s._v("server{}"),e("strong",[s._v("中")]),s._v("listen")]),s._v("下一行粘贴以下代码(可根据需求自行调整大小)。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("client_max_body_size 20M;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("注意版本PHP 7.4.33，Mysql 5.7，redis 7.0")])]),s._v(" "),e("p",[s._v("4、安装nvm")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("5、通过nvm安装npm 建议14.16.0")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("nvm install v14.16.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6、通过git将项目代码clone到电脑本地某一个文件夹")]),s._v(" "),e("h2",{attrs:{id:"二、项目部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、项目部署"}},[s._v("#")]),s._v(" 二、项目部署")]),s._v(" "),e("p",[s._v("打开项目代码文件夹")]),s._v(" "),e("h3",{attrs:{id:"_1-复制配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-复制配置文件"}},[s._v("#")]),s._v(" 1.复制配置文件")]),s._v(" "),e("ol",[e("li",[s._v("复制项目根目录/storage/configure/plus.yml.example 为 plus.yml")]),s._v(" "),e("li",[s._v("复制项目根目录/storage/configure/.env.example 为 .env")])]),s._v(" "),e("h3",{attrs:{id:"_2-配置plus-yml文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置plus-yml文件"}},[s._v("#")]),s._v(" 2. 配置plus.yml文件")]),s._v(" "),e("p",[s._v("主要是修改以下参数")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("app.env # 测试：local，生产：production\napp.debug # 开启Debug\napp.url # 域名，带http，例如http://ts.cn\n\ncache.default # 改为 redis\ncache.prefix # 同一个服务器多个ts，就需要修改\n\ndatabase.mysql # mysql信息\ndatabase.mysql.database # 表名称，务必和新建的表保持一致，例如：plus\ndatabase.mysql.username # sql管理员名称，例如：root\ndatabase.mysql.password # sql管理员密码，例如：root\n\nfilesystems.disks.public.url # https://域名/storage，例如：http://ts.cn/storage\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h2",{attrs:{id:"三、创建项目站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、创建项目站点"}},[s._v("#")]),s._v(" 三、创建项目站点")]),s._v(" "),e("p",[s._v("1、打开PhpWebStudy-Hosts-添加，name输入本地域名，例如:ts.cn")]),s._v(" "),e("p",[s._v("2、alias可不填，mark可写备注，root path 选择项目/public，子站默认关闭")]),s._v(" "),e("p",[s._v("3、PHP默认74、Port默认80、8080、SSL默认关闭")]),s._v(" "),e("p",[s._v("4、模板输入框填入：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("location / {\n\ttry_files $uri $uri/ /index.php$is_args$query_string;\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("5、点击右上角“保存”")]),s._v(" "),e("h2",{attrs:{id:"四、创建数据库站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、创建数据库站点"}},[s._v("#")]),s._v(" 四、创建数据库站点")]),s._v(" "),e("p",[s._v("1、下载phpMyAdmin")]),s._v(" "),e("p",[e("a",{ref:"noopener noreferrer",attrs:{href:"https://www.phpmyadmin.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),e("OutboundLink")],1),s._v("点击“download”下载源码")]),s._v(" "),e("p",[s._v("2、解压得到类似phpMyAdmin-5.2.1-all-languages，复制到项目根目录")]),s._v(" "),e("p",[s._v("3、配置数据库空密码登录")]),s._v(" "),e("p",[s._v("修改phpMyAdmin/libraries/config.default.php里的 $cfg['Servers'][$i]['AllowNoPassword'] = false 为 $cfg['Servers'][$i]['AllowNoPassword'] = true")]),s._v(" "),e("p",[s._v("4、打开PhpWebStudy-Hosts-添加，name输入本地域名，例如:"),e("strong",[s._v("mysql.io")])]),s._v(" "),e("p",[s._v("5、alias可不填，mark可写备注，root path 选择项目/phpMyAdmin文件夹，子站默认关闭")]),s._v(" "),e("p",[s._v("6、PHP默认74、Port默认80、8080、SSL默认关闭")]),s._v(" "),e("p",[s._v("7、点击右上角“保存”")]),s._v(" "),e("p",[s._v("8、浏览器输入"),e("strong",[s._v("mysql.io")]),s._v('，账号root 密码默认为空，点击"登录"，进入管理页面后设置账号密码')]),s._v(" "),e("p",[e("strong",[s._v("该账号密码需要和plus.yml中sql账号信息保持一致")])]),s._v(" "),e("h2",{attrs:{id:"五、配置以及项目编译"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、配置以及项目编译"}},[s._v("#")]),s._v(" 五、配置以及项目编译")]),s._v(" "),e("p",[s._v("1、打开终端，进入项目目录")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd 项目文件夹 \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2、安装依赖")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("composer install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3、迁移数据库")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("php artisan migrate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4、数据库初始化数据")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("php artisan db:seed\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("5、创建新密钥")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("php artisan app:key-generate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6、上传文件软链")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("php artisan storage:link\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("7、发布资源")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("php artisan vendor:publish --all\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"六、测试以及其他"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、测试以及其他"}},[s._v("#")]),s._v(" 六、测试以及其他")]),s._v(" "),e("p",[s._v("1、访问后台，域名/admin，管理员账号root 密码root，网址为创建站点时输入地址")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("例如：http://ts.cn/admin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2、后续修改后编译需要使用npm v14.16.0版本，如果本地有多个npm版本可通过nvm use v14.16.0进行切换")])])}),[],!1,null,null,null);a.default=n.exports}}]);