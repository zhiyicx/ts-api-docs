(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{370:function(s,a,e){"use strict";e.r(a);var t=e(43),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("本章将带领你在 "),e("strong",[s._v("CentOS")]),s._v(" "),e("code",[s._v("7.4")]),s._v(" 系统中安装 "),e("strong",[s._v("MySQL")]),s._v(" 5.7 数据库。参考资料：")]),s._v(" "),e("ul",[e("li",[e("a",{ref:"noopener noreferrer",attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/binary-installation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux 二进制安装 MySQL"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[s._v("#")]),s._v(" 下载")]),s._v(" "),e("p",[s._v("首先我们打开「"),e("a",{ref:"noopener noreferrer",attrs:{href:"https://dev.mysql.com/downloads/mysql/5.7.html#downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 5.7 下载页面"),e("OutboundLink")],1),s._v("」然后在英文界面有三个选择框，分别是 "),e("code",[s._v("Select Version")]),s._v("、"),e("code",[s._v("Select Operating System")]),s._v(" 和 "),e("code",[s._v("Select OS Version")]),s._v("，那么 "),e("code",[s._v("Select Version")]),s._v(" 以及默认为我们选择好了，是 "),e("code",[s._v("5.7.*")]),s._v(" 这里的 "),e("code",[s._v("*")]),s._v(" 是恩和版本，如果不是 "),e("code",[s._v("5.7")]),s._v(" 开头，请点击选择 "),e("code",[s._v("5.7")]),s._v(" 开头的版本。"),e("code",[s._v("Select Operating System")]),s._v(" 这里我们点击后选择 "),e("code",[s._v("Linux - Generic")]),s._v(" 即可，"),e("code",[s._v("Select OS Version")]),s._v(" 系统版本我们下啦选择 "),e("code",[s._v("Linux - Generic (glibc 2.12)(x86, 64-bit)")]),s._v(" 即可。如图：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/mysql-download-page.png")}}),s._v(" "),e("p",[s._v("请保证除了 "),e("code",[s._v("Select Version")]),s._v(" 以外，其他选择必须与上图选择一致，然后看在你的页面中找到上图中"),e("strong",[s._v("青蓝色")]),s._v("框标记的 "),e("code",[s._v("Download")]),s._v(" 按钮，点击这个按钮，打开页面如下：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/mysql-download-page-get-archival.png")}}),s._v(" "),e("p",[s._v("找到页面底部的 "),e("code",[s._v("No thanks, just start my download.")]),s._v(" 文字，右键复制链接地址我们得到 "),e("code",[s._v("https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz")]),s._v(" 这样的文件。")]),s._v(" "),e("p",[s._v("然后我们登入 CentOS 服务器，输入 "),e("code",[s._v("cd ~")]),s._v(" 命令进入家目录，然后下载该文件：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L -o mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("注意，我这里是 "),e("code",[s._v("5.7.23")]),s._v(" 版本，当你阅读教程的时候可能不是 23 版本了，记得在命令中替换为你的版本号！\n同时，如果你的系统不是 64 bit 请选择 32 bit 版本。")])]),s._v(" "),e("h2",{attrs:{id:"解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[s._v("#")]),s._v(" 解压")]),s._v(" "),e("p",[s._v("执行完成上面的步骤后，我们就下载完了 MySQL 5.7 源码，接下里我们对源码归档进行解压处理。首先运行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行完成后运行 "),e("code",[s._v("ls")]),s._v(" 命令你会看到一个 "),e("code",[s._v("mysql-5.7.23-linux-glibc2.12-x86_64")]),s._v(" 的目录，那么，我们以及获取到源代码了！")]),s._v(" "),e("h2",{attrs:{id:"初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[s._v("#")]),s._v(" 初始化")]),s._v(" "),e("p",[s._v("在运行初始化之前，我们需要安装一个链接库 "),e("code",[s._v("libaio")]),s._v(" 这个库是 MySQL 二进制安装必须的库：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y libaio\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装完成后我们还需要为 MySQL 提供用户和用户组来运行（我这里设置为 "),e("code",[s._v("mysql:mysql")]),s._v("）：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -r -g mysql -s /bin/false mysql\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("接下来，我们将程序放到一个比较统一的位置，推荐放置在 "),e("code",[s._v("/usr/local")]),s._v(" 目录下：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" -f ~/mysql-5.7.23-linux-glibc2.12-x86_64 /usr/local/mysql\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后创建 MySQL 需要的文件目录并设置权限和用户：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/mysql/mysql-files "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" mysql:mysql /usr/local/mysql/mysql-files "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("750")]),s._v(" /usr/local/mysql/mysql-files\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("现在，我们来初始化数据库吧：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("/usr/local/mysql/bin/mysqld --initialize --user"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n/usr/local/mysql/bin/mysql_ssl_rsa_setup\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("执行完成后，从页面输出中找到 "),e("code",[s._v("[Note] A temporary password is generated for root@localhost: icXadLT)-0mx")]),s._v(" 这样一条信心，例如这条 Example 信息中 "),e("code",[s._v("icXadLT)-0mx")]),s._v(" 这一段就是默认的 root 帐号密码。")]),s._v(" "),e("h2",{attrs:{id:"一些方便设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一些方便设置"}},[s._v("#")]),s._v(" 一些方便设置")]),s._v(" "),e("p",[s._v("当然，MySQL 在 "),e("code",[s._v("bin")]),s._v(" 目录下提供了很多好用的命令，我们每次都全路径指定很繁琐，所以加入到环境变量是一个很好的注意。")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("vim /etc/profile")]),s._v(" 打开文件，在结尾写入：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/usr/local/mysql/bin/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后执行 "),e("code",[s._v("source /etc/profile")]),s._v(" 即可。")]),s._v(" "),e("h2",{attrs:{id:"启动-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-mysql"}},[s._v("#")]),s._v(" 启动 MySQL")]),s._v(" "),e("p",[s._v("我们可以使用 "),e("code",[s._v("bin/mysqld_safe --user=mysql &")]),s._v(" 来启动，但是我们先不要这样子。我们有更好的和安全的非法：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" -f /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql.server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行完成后，我们执行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("/etc/init.d/mysql.server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("会输出下面的结果：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Usage: mysql.server  {start|stop|restart|reload|force-reload|status}  [ MySQL server options ]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("我们通过这种服务命令来启动数据库是最好的现在执行来启动吧：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("/etc/init.d/mysql.server start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"登入数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登入数据库"}},[s._v("#")]),s._v(" 登入数据库")]),s._v(" "),e("p",[s._v("启动完成后，我们试一下是否正常启动了呢：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql -u root -h localhost -P 3360 -p\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后会出现一个密码输入，现在输入之前初始化的时候得到的 root 账号密码，即可成功进入数据库啦！")]),s._v(" "),e("h2",{attrs:{id:"小问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小问题"}},[s._v("#")]),s._v(" 小问题")]),s._v(" "),e("p",[s._v("进入数据库后，你可能迫不及待的输入 "),e("code",[s._v("show databases;")]),s._v(" 查看数据表了，输入后，会返回：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("哈哈，懵逼是吧，这是因为我们没有修改 root 帐号的默认密码所致，我们在数据库输入：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" password"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"你的密码"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行完成后，我们需要刷新权限：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("flush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("好了，我们现在执行 "),e("code",[s._v("show databases;")]),s._v(" 就正常了，输出内容如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n4 rows in set (0.00 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("证明我们修改密码成功了，之后使用 root 登入 MySQL 需要使用你设置的"),e("strong",[s._v("新密码")]),s._v("！")]),s._v(" "),e("p",[s._v("退出 MySQL 则在输入 "),e("code",[s._v("exit")]),s._v(" 然后回车即可！")]),s._v(" "),e("h2",{attrs:{id:"命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("/etc/init.d/mysql.server")]),s._v(" 输出辅助信息")]),s._v(" "),e("li",[e("code",[s._v("/etc/init.d/mysql.server start")]),s._v(" 启动 MySQL")]),s._v(" "),e("li",[e("code",[s._v("/etc/init.d/mysql.server stop")]),s._v(" 停止 MySQL")]),s._v(" "),e("li",[e("code",[s._v("/etc/init.d/mysql.server restart")]),s._v(" 重启")]),s._v(" "),e("li",[e("code",[s._v("/etc/init.d/mysql.server reload")]),s._v(" 重新加载配置")]),s._v(" "),e("li",[e("code",[s._v("/etc/init.d/mysql.server force-reload")]),s._v(" 强制重新加载配置")]),s._v(" "),e("li",[e("code",[s._v("/etc/init.d/mysql.server status")]),s._v(" 查看运行状态")])])])}),[],!1,null,null,null);a.default=r.exports}}]);