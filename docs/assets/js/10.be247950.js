(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{365:function(t,s,e){"use strict";e.r(s);var _=e(42),a=Object(_.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"_1-使用本地存储创建上传任务时-出现401-403错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用本地存储创建上传任务时-出现401-403错误"}},[t._v("#")]),t._v(" 1. 使用本地存储创建上传任务时，出现401/403错误？")]),t._v(" "),e("blockquote",[e("p",[t._v("http状态码中，401表示请求没有通过认证，所以此问题的终极原因就是请求没有通过认证")])]),t._v(" "),e("blockquote",[e("p",[t._v("403表示无权操作")])]),t._v(" "),e("h3",{attrs:{id:"问题排查"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题排查"}},[t._v("#")]),t._v(" 问题排查")]),t._v(" "),e("h4",{attrs:{id:"_403状态码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_403状态码"}},[t._v("#")]),t._v(" 403状态码")]),t._v(" "),e("p",[t._v("表示发起当前请求的用户没有上传附件的权限，请在后台管理中")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/assets/img/Q&A/storage/roles.png")}}),t._v(" "),e("img",{attrs:{src:t.$withBase("/assets/img/Q&A/storage/storage-ability.png")}}),t._v("\n勾选**上传附件**权限\n"),e("blockquote",[e("p",[t._v("上面的图示中，我们默认发送当前请求的用户所在的用户组为"),e("code",[t._v("创始人")]),t._v("，你需要根据实际情况来处理")])]),t._v(" "),e("h4",{attrs:{id:"_401状态码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_401状态码"}},[t._v("#")]),t._v(" 401状态码")]),t._v(" "),e("p",[t._v("由于创建上传任务时使用 "),e("code",[t._v("URL::temporarySignedRoute")]),t._v("创建了用于上传的临时url")]),t._v(" "),e("p",[t._v("此url包含了上传文件时所需要的参数，加密值以及时间限制")]),t._v(" "),e("p",[t._v("而验证加密值时，临时url和上传请求必须拥有的协议，即"),e("code",[t._v("http")]),t._v(" 或者 "),e("code",[t._v("https")]),t._v(",")]),t._v(" "),e("p",[t._v("所以需要设置 "),e("code",[t._v("storage/configure/plus.yml")]),t._v("中的 "),e("code",[t._v("app.url")]),t._v(" 和  "),e("code",[t._v("filesystem.disks.public.url")]),t._v("使用相同的协议")]),t._v(" "),e("blockquote",[e("p",[t._v("如果使用"),e("code",[t._v("https")]),t._v(",需要提前设置好nginx的站点配置使用ssl监听请求")])])])}),[],!1,null,null,null);s.default=a.exports}}]);