---
title: 从 2.2 升级到 2.3
prev: false
next: false
---

::: danger
本升级指南仅适用于 `2.2` 版本升级至 `2.3` 版本，如果你并非 2.2 版本，请查看其他升级指南，Plus 程序不允许跨版本升级！
:::

## 更新代码

**预计耗时：** `2 小时`

这是你自我操作的步骤，确认将你的 2.2 版本代码升级到 2.3 版本，如果你做过一些自定义修改可能会出现代码冲突，你需要解决。

## 升级依赖

**预计耗时：** `3 分钟`

进入 Plus 程序目录，执行：

```bash
composer update -vvv
```

这个过程根据你的网速决定快慢。

## 清理程序缓存

**预计耗时：** `1 分钟`

不管你是否使用 Laravel 命令进行过程序优化，我们仍然建议你执行下面的命令：

```bash
php artisan view:clear && \
php artisan route:clear && \
php artisan config:clear
```

## 其他

`2.3` 版本作为一个重大重构版本，我们重构了 SPA 和消息系统，但是没有针对数据表进行更改，也让升级难度大大降低。但是合并代码的时候请仔细核对代码！如果你用到了重构部分的服务，可能需要进行兼容！

## 2.3.1

### 数据库升级

 - `users` 用户表
    
    添加字段：
    | 名称 | 类型 | 可空 | 其他 |
    |----|----|----|----|
    | `register_ip` | `VARCHAR(45)` | `true` | 默认值 `::1` |
    | `last_login_ip` | `VARCHAR(45)` | `true` | 默认值 `::1` |

### 数据库填充

```
php artisan db:seed --class="AbilitySeeder"
```
